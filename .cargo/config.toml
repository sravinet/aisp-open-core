# Canonical Cargo configuration for AISP Core
[alias]
# Production testing commands - exclude deprecated archive crate
test-all = "test --workspace --exclude aisp --all-features -- --test-threads=1"
test-fast = "test --workspace --exclude aisp --lib"
test-integration = "test --workspace --exclude aisp --test integration_comprehensive --all-features"
test-perf = "test --workspace --exclude aisp --test performance_benchmarks --all-features --release"
test-security = "test --workspace --exclude aisp --test security_regression --features security"

# Silent test commands (suppress unused code warnings)
test-silent = "test --workspace --exclude aisp --lib --quiet"
test-all-silent = "test --workspace --exclude aisp --all-features --quiet -- --test-threads=1"

# Development commands  
check-all = "check --workspace --all-targets --all-features"
fmt-all = "fmt --all"
clippy-all = "clippy --workspace --all-targets --all-features -- -D warnings"
build-release = "build --workspace --release --all-features"

# Documentation commands
doc-all = "doc --workspace --all-features --no-deps --open"
doc-private = "doc --workspace --all-features --document-private-items"

# Verification-specific commands
verify = ["check", "--features", "verification"]
verify-z3 = ["test", "--features", "z3-verification", "--", "--test-threads=1"]

[build]
# Use all available cores for parallel compilation
jobs = -1

[target.'cfg(unix)']
# Unix-specific optimizations
rustflags = ["-C", "target-cpu=native"]

[env]
# Set environment variables for testing
RUST_BACKTRACE = "1"
RUST_LOG = "debug"
# Environment variable to suppress warnings in test mode
# Usage: RUSTFLAGS="-A unused-variables -A unused-imports -A dead-code" cargo test
CARGO_TEST_RUSTFLAGS = "-A unused-variables -A unused-imports -A dead-code -A unused-mut -A unused-assignments"